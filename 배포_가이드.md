# ë”ë¹„ë‹¤ ìš”ì–‘ì› í™ˆí˜ì´ì§€ ë°°í¬ ê°€ì´ë“œ

> **ë„ë©”ì¸**: https://thevida.co.kr

## ğŸš€ ë¹ ë¥¸ ë°°í¬ (Docker ì‚¬ìš©)

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
# ì´ë©”ì¼ ì„¤ì • (Gmail ì‚¬ìš©)
export EMAIL_USER=your-email@gmail.com
export EMAIL_PASS=your-app-password
export FRONTEND_URL=http://localhost:3000
```

### 2. Docker Composeë¡œ ë°°í¬
```bash
# ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰
./deploy.sh

# ë˜ëŠ” ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰
docker-compose up -d
```

### 3. ì ‘ì† í™•ì¸
- **í”„ë¡ íŠ¸ì—”ë“œ**: http://localhost:3000
- **ë°±ì—”ë“œ API**: http://localhost:5000
- **ê´€ë¦¬ì íŒ¨ë„**: http://localhost:3000/admin
- **ê´€ë¦¬ì ê³„ì •**: admin@thevida.com / admin123

### 4. ë„ë©”ì¸ ì„¤ì • (thevida.co.kr)
```bash
# DNS ì„¤ì •
# A ë ˆì½”ë“œ: @ â†’ ì„œë²„ IP ì£¼ì†Œ
# CNAME ë ˆì½”ë“œ: www â†’ thevida.co.kr
# A ë ˆì½”ë“œ: api â†’ ì„œë²„ IP ì£¼ì†Œ (ë°±ì—”ë“œìš©)
```

## ğŸŒ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë°°í¬

### Vercel (í”„ë¡ íŠ¸ì—”ë“œ)

1. **Vercel CLI ì„¤ì¹˜**
```bash
npm install -g vercel
```

2. **í”„ë¡œì íŠ¸ ë°°í¬**
```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ
vercel --prod
```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
- Vercel ëŒ€ì‹œë³´ë“œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- `REACT_APP_API_URL`: ë°±ì—”ë“œ API URL

### Railway (ë°±ì—”ë“œ)

1. **Railway CLI ì„¤ì¹˜**
```bash
npm install -g @railway/cli
```

2. **ë¡œê·¸ì¸ ë° í”„ë¡œì íŠ¸ ìƒì„±**
```bash
railway login
railway init
```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
```bash
railway variables set NODE_ENV=production
railway variables set MONGODB_URI_PROD=your-mongodb-uri
railway variables set JWT_SECRET=your-jwt-secret
railway variables set EMAIL_USER=your-email@gmail.com
railway variables set EMAIL_PASS=your-app-password
```

4. **ë°°í¬**
```bash
railway up
```

### MongoDB Atlas (ë°ì´í„°ë² ì´ìŠ¤)

1. **í´ëŸ¬ìŠ¤í„° ìƒì„±**
   - [MongoDB Atlas](https://www.mongodb.com/atlas) ì ‘ì†
   - ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
   - í´ëŸ¬ìŠ¤í„° ìƒì„± (M0 Free í‹°ì–´ ê¶Œì¥)

2. **ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì ìƒì„±**
   - Database Access â†’ Add New Database User
   - Usernameê³¼ Password ì„¤ì •

3. **IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì„¤ì •**
   - Network Access â†’ Add IP Address
   - `0.0.0.0/0` (ëª¨ë“  IP í—ˆìš©) ë˜ëŠ” íŠ¹ì • IP

4. **ì—°ê²° ë¬¸ìì—´ ë³µì‚¬**
   - Clusters â†’ Connect â†’ Connect your application
   - ì—°ê²° ë¬¸ìì—´ì„ í™˜ê²½ ë³€ìˆ˜ì— ì„¤ì •

## ğŸ–¥ï¸ VPS ë°°í¬

### Ubuntu/Debian ì„œë²„

1. **ì„œë²„ ì¤€ë¹„**
```bash
# ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# Docker ì„¤ì¹˜
sudo apt install docker.io docker-compose nginx -y
sudo systemctl enable docker
sudo systemctl start docker

# ì‚¬ìš©ìë¥¼ docker ê·¸ë£¹ì— ì¶”ê°€
sudo usermod -aG docker $USER
```

2. **í”„ë¡œì íŠ¸ í´ë¡ **
```bash
git clone <repository-url>
cd thevida
```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
```bash
# ë°±ì—”ë“œ í™˜ê²½ ë³€ìˆ˜
cd backend
cp env.example .env
# .env íŒŒì¼ í¸ì§‘

# í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ ë³€ìˆ˜
cd ..
cp env.example .env
# .env íŒŒì¼ í¸ì§‘
```

4. **Docker Compose ì‹¤í–‰**
```bash
docker-compose up -d
```

5. **Nginx ì„¤ì •**
```bash
# Nginx ì„¤ì • íŒŒì¼ ìƒì„±
sudo nano /etc/nginx/sites-available/thevida

# ë©”ì¸ ì‚¬ì´íŠ¸ ì„¤ì •
server {
    listen 80;
    server_name thevida.co.kr www.thevida.co.kr;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# API ì„œë¸Œë„ë©”ì¸ ì„¤ì •
server {
    listen 80;
    server_name api.thevida.co.kr;

    location / {
        proxy_pass http://localhost:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±
sudo ln -s /etc/nginx/sites-available/thevida /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

6. **SSL ì¸ì¦ì„œ ì„¤ì • (Let's Encrypt)**
```bash
# Certbot ì„¤ì¹˜
sudo apt install certbot python3-certbot-nginx

# SSL ì¸ì¦ì„œ ë°œê¸‰
sudo certbot --nginx -d thevida.co.kr -d www.thevida.co.kr -d api.thevida.co.kr

# ìë™ ê°±ì‹  ì„¤ì •
sudo crontab -e
# ë‹¤ìŒ ì¤„ ì¶”ê°€: 0 12 * * * /usr/bin/certbot renew --quiet
```

## ğŸŒ ë„ë©”ì¸ ì„¤ì • ê°€ì´ë“œ

### DNS ì„¤ì • (thevida.co.kr)
```bash
# A ë ˆì½”ë“œ ì„¤ì •
@     â†’ ì„œë²„ IP ì£¼ì†Œ
api   â†’ ì„œë²„ IP ì£¼ì†Œ (ë°±ì—”ë“œ APIìš©)

# CNAME ë ˆì½”ë“œ ì„¤ì •
www   â†’ thevida.co.kr
```

### ì„œë¸Œë„ë©”ì¸ êµ¬ì„±
- **ë©”ì¸ ì‚¬ì´íŠ¸**: https://thevida.co.kr
- **ë°±ì—”ë“œ API**: https://api.thevida.co.kr
- **ê´€ë¦¬ì íŒ¨ë„**: https://thevida.co.kr/admin

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### ë°±ì—”ë“œ (.env)
```env
# Server Configuration
PORT=5000
NODE_ENV=production

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/thevida
MONGODB_URI_PROD=mongodb+srv://username:password@cluster.mongodb.net/thevida

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-here
JWT_EXPIRES_IN=7d

# Email Configuration (Gmail)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
EMAIL_FROM=ë”ë¹„ë‹¤ ìš”ì–‘ì› <your-email@gmail.com>

# CORS Configuration
CORS_ORIGIN=https://thevida.co.kr

# Admin Configuration
ADMIN_EMAIL=admin@thevida.com
ADMIN_PASSWORD=admin123
```

### í”„ë¡ íŠ¸ì—”ë“œ (.env)
```env
REACT_APP_API_URL=https://api.thevida.co.kr/api
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ìœ ì§€ë³´ìˆ˜

### ë¡œê·¸ í™•ì¸
```bash
# Docker ë¡œê·¸
docker-compose logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs -f backend
docker-compose logs -f frontend
```

### ë°±ì—…
```bash
# MongoDB ë°±ì—…
docker-compose exec mongodb mongodump --out /backup

# ë°±ì—… íŒŒì¼ ë³µì‚¬
docker cp thevida-mongodb:/backup ./backup
```

### ì—…ë°ì´íŠ¸
```bash
# ì½”ë“œ ì—…ë°ì´íŠ¸
git pull origin main

# ì»¨í…Œì´ë„ˆ ì¬ë¹Œë“œ
docker-compose down
docker-compose build --no-cache
docker-compose up -d
```

## ğŸ”’ ë³´ì•ˆ ì„¤ì •

### ë°©í™”ë²½ ì„¤ì •
```bash
# UFW í™œì„±í™”
sudo ufw enable

# í•„ìš”í•œ í¬íŠ¸ë§Œ í—ˆìš©
sudo ufw allow 22    # SSH
sudo ufw allow 80    # HTTP
sudo ufw allow 443   # HTTPS
```

### SSL/TLS ì„¤ì •
- Let's Encrypt ì¸ì¦ì„œ ì‚¬ìš©
- HSTS í—¤ë” ì„¤ì •
- ê°•ë ¥í•œ ì•”í˜¸í™” ìŠ¤ìœ„íŠ¸ ì‚¬ìš©

### ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ
- ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©
- IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì„¤ì •
- ì •ê¸°ì ì¸ ë°±ì—…

## ğŸš¨ ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

1. **í¬íŠ¸ ì¶©ëŒ**
```bash
# í¬íŠ¸ ì‚¬ìš© í™•ì¸
sudo netstat -tulpn | grep :5000
sudo netstat -tulpn | grep :3000

# ì¶©ëŒí•˜ëŠ” í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
sudo kill -9 <PID>
```

2. **Docker ê¶Œí•œ ë¬¸ì œ**
```bash
# Docker ê·¸ë£¹ì— ì‚¬ìš©ì ì¶”ê°€
sudo usermod -aG docker $USER
newgrp docker
```

3. **ë©”ëª¨ë¦¬ ë¶€ì¡±**
```bash
# Docker ë¦¬ì†ŒìŠ¤ ì œí•œ ì„¤ì •
# docker-compose.ymlì— ì¶”ê°€
services:
  backend:
    deploy:
      resources:
        limits:
          memory: 512M
```

4. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨**
```bash
# MongoDB ìƒíƒœ í™•ì¸
docker-compose exec mongodb mongo --eval "db.adminCommand('ping')"

# ì—°ê²° ë¬¸ìì—´ í™•ì¸
echo $MONGODB_URI_PROD
```

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

1. **ë¡œê·¸ í™•ì¸**: `docker-compose logs -f`
2. **í™˜ê²½ ë³€ìˆ˜ í™•ì¸**: ëª¨ë“  í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
3. **ë„¤íŠ¸ì›Œí¬ ì—°ê²°**: ë°©í™”ë²½ ë° í¬íŠ¸ ì„¤ì • í™•ì¸
4. **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰**: CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ í™•ì¸

### ì—°ë½ì²˜
- **ê¸°ìˆ  ì§€ì›**: tech@thevida.co.kr
- **ê¸´ê¸‰ ìƒí™©**: 032-891-0121 (ì¸ì²œì )
- **ì›¹ì‚¬ì´íŠ¸**: https://thevida.co.kr
